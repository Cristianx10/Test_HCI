<style>
    .bote {
        width: 144px;
        height: 183px;
    }

    .basura__elementos {
        height: 70%;
    }

    .basura {
        display: flex;
        justify-content: center;
        height: 30%;
    }

    .basura__elementos div {
        display: inline-block;

    }
</style>

<div class="pantalla">
    <div class="basura__elementos">

    </div>

    <div class="basura">
        <div id="vidrio" class="bote" style="background-image: url('../../img/ciencias/vidrio.png')"></div>
        <div id="plastico" class="bote" style="background-image: url('../../img/ciencias/plastico.png')"></div>
        <div id="organico" class="bote" style="background-image: url('../../img/ciencias/organico.png')"></div>
        <div id="papel" class="bote" style="background-image: url('../../img/ciencias/papel.png')"></div>
    </div>
</div>

<script src="../../js/reciclaje.js"></script>
<script>

    let reciclaje = new Reciclaje();

    loadJson("../../data/ciencias/reciclaje.json", (r) => {

        let recursos = r.recursos;


        for (let i = 0; i < recursos.length; i++) {
            let rec = recursos[i];
            reciclaje.agregar(new Basura(rec.url, rec.categoria));
        }


        // There's the gallery and the trash
        let elementos = $(".basura__elementos");
        let vidrio = $("#vidrio");
        let plastico = $("#plastico");
        let organico = $("#organico");
        let papel = $("#papel");

        // Let the gallery items be draggable
        $("div", elementos).draggable({
            cancel: "a.ui-icon", // clicking an icon won't initiate dragging
            revert: "invalid", // when not dropped, the item will revert back to its initial position
            containment: "document",
            // helper: "clone",
            cursor: "move"
        });

        // Let the trash be droppable, accepting the gallery items

        function almacenaje(contenedores) {
            contenedores.forEach(c => {
                c.droppable({
                    accept: ".basura__elementos div",
                    drop: function (event, ui) {
                        deleteImage(ui.draggable, c);
                    }
                });
            });
        }

        almacenaje([vidrio, plastico, organico, papel]);


        // Image deletion function

        function deleteImage($item, t) {
            $item.fadeOut(function () {
                var $list = $("ul", t).length ?
                    $("ul", t) :
                    $("<ul class='gallery ui-helper-reset'/>").appendTo(t);

                if (reciclaje.seleccion != null) {
                    if (reciclaje.validarBasura(t[0].id)) {
                        
                    } else {
                        
                    }
                }
                $item.find(".basura").remove();
               
            });
        }

    });

</script>