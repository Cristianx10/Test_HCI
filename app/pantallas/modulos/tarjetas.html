<link rel="stylesheet" href="../sass/aplicaciones/targetas.css" />
<div class="tableros">

</div>




<script src="../js/tarjetas.js"></script>

<script>

  loadJson("./data/tarjetas.json", (r) => {

    let con_tarjetas = new Contenedor();
    for (let i = 0; i < r.secciones.length; i++) {
      let sec = r.secciones[i];
      let fichas = [];

      for (let j = 0; j < sec.recursos.length; j++) {
        let recur = sec.recursos[j];
        let a = document.createElement("div");
        a.innerHTML = `<div style="background-image:url('${recur}'); width:100%; height:100%;background-size: contain;
    background-repeat: no-repeat;
"></div>`;

        fichas.push(a);
      }

      let parejas = [];
      for (let i = 0; i < fichas.length; i++) {
        let a = fichas[i];
        i++;
        let b = fichas[i];
        let par = new Pareja(a, b);
        parejas.push(par);

      }

      let tab = new tablero_tarjetas(parejas, sec.posiciones);
      con_tarjetas.agregar(new Contenido(tab.tab_global, tab));

      $(".tableros").append(tab.tab_global);

    }

    nav = new Navegable(con_tarjetas);
    nav.iniciar();
    nav.setPermitirAll(true)

    nav.colocarAvance();
    nav.colocarTiempo();
    nav.colocarProgreso();

    nav.asignarCondiciones((o) => {
      o.setValidacion(() => {
        console.log('ganador');

        nav.siguiente(() => { }, () => {
          $(".principal").load("./pantallas/modulos/pizarra.html");
        });

      });

      o.setIntentoAcierto(() => {
        console.log("Valido");
      });

      o.setIntentoFallo(() => {
        console.log("Fallo");
      });
    });

  });

</script>